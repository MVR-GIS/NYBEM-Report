## `nybem` R-package


All model code for the NYBEM is contained within an R-package (`nybem`, [available via github](https://github.com/MVR-GIS)). Generally speaking, a package can be thought of as a fundamental unit of code that can include functions, data, documentation, and tests ([Wickham and Bryan 2019](https://r-pkgs.org/)). Packages then provide a transportable and reproducible mechanism for code sharing and publication. The `nybem` package contains six functions and seven data.frames storing suitability curves. The first three functions can largely be thought of as habitat mapping functions. The second three function compute habitat quality using a general set of algorithms. The seven data frames contain suitability curve data as described in Sections 4.2-4.7. These topics will be treated separately in 4.8.1-4.8.3, respectively. 


NOTABLY, everything is modular and can be used independently. In NYBEM, the quantity and quality of each ecosystem type may be assessed separately. For instance, ecosystems could be rapidly delineated from empirical data for the existing condition (e.g., field or tide gauge) or modeled hydrodynamic data for future conditions or proposed management actions.


### Habitat Mapping Functions

Insert description of code for habitat zonation.

```{r echo=TRUE}
#Functions for isolating habitat types

##########
#Labels for tidal zones
ZoneTidal <- c("Deep", "Subtidal", "Intertidal", "Upland")

#Create function for isolating tidal zones
set.tidal.zone <- function(bedelev, MLLW, MHHW){
  #Assign zone
  tidalzone <- ifelse(bedelev <= -2, 1,
          ifelse(bedelev <= MLLW, 2,
          ifelse(bedelev <= MHHW, 3, 
          ifelse(bedelev > MHHW, 4, NA))))
  #Send output
  tidalzone
}

##########
#Labels for salinity zones
ZoneSalinity <- c("Marine", "Estuarine", "Fresh")

#Create function for isolating salinity zones
set.salinity.zone <- function(salinity){
  #Assign zone
  salinityzone <- ifelse(salinity >=30, 1, 
                  ifelse(salinity < 30 & salinity >= 0.5, 2, 
                  ifelse(salinity < 0.5 & salinity >= 0, 3, NA)))
  #Send output
  salinityzone
}

##########
#Labels for habitat zones
ZoneHabitat <- c("Upland", "Marine.Deep", "Marine.Subtidal", "Marine.Intertidal", "Estuarine.Subtidal", "Estuarine.Intertidal", "Freshwater")

#Create function for isolating habitat zones
set.habitat.zone <- function(tidalzone, salinityzone){
  #Assign zone
  habitatzone <- ifelse(tidalzone == 4, 1,
          ifelse(salinityzone == 1 & tidalzone == 1, 2,
          ifelse(salinityzone == 1 & tidalzone == 2, 3,
          ifelse(salinityzone == 1 & tidalzone == 3, 4,
          ifelse(salinityzone == 2 & tidalzone == 1 | tidalzone == 2, 5,
          ifelse(salinityzone == 2 & tidalzone == 3, 6,
          ifelse(salinityzone == 3 & tidalzone == 1 | tidalzone == 2 | tidalzone == 3, 7, NA)))))))
  #Send output
  habitatzone
}
```


### Habitat Quality Functions

`is_RasterLayer` Insert description here as needed.

`SI.calc` Insert description here as needed.

`HSIcalc` Insert description here as needed.

__Do we need to reference the spatial coordinate systems? Maybe the R function or package used?__

`patch.rasterizer`: This function rasterizes the output of `patch.mapper` based on a specified grid resolution and aligns that layer with a specified spatial coordinate system. 


```{r echo=TRUE}
#Functions for rasterizing habitat types
patch.rasterizer <- function(patch.mapper.output, grid.resolution, my.coordinate.system){
  #Insert code
}
```


### Habitat Suitability Curves

Insert description here as needed.

NYBEM.fresh.tid


```{r echo=TRUE}
#Store models in a single list and show them here?
NYBEM.fresh.tid
```

